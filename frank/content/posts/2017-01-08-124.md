---
id: 124
date: 2017-01-08T09:48:00+00:00
author: Andrew Frank
layout: post
permalink: /124/
blogger_blog:
  - andrewufrank.blogspot.com
blogger_author:
  - andrew
blogger_permalink:
  - /2017/01/a-short-tutorial-to-use-virtuoso-rdf.html
blogger_internal:
  - /feeds/3533242289707427914/posts/default/7246703616483382948
categories:
  - Uncategorized
---
<h2><span></span><span></span>A short tutorial to use Virtuoso RDF database to store some RDF data and execute a SPARQL query</h2><br />I have used 4store, which is easy to install ("apt-get install 4store") and very easy to use. For 4store exist a short but reasonable documentation <https: ocumentation="" store.danielknoell.de="" trac="" wiki=""><a href="https://4store.danielknoell.de/trac/wiki/Documentation/">https://4store.danielknoell.de/trac/wiki/Documentation/</a>. Unfortunately, the code has not been much developed lately on github <https: garlik="" github.com="" store=""> (<a href="https://github.com/garlik/4store"> https://github.com/garlik/4store</a>) and new constructs in SPARQL are not implemented (e.g. subselect queries). My task required queries, where select clauses are nested and I was forced to look for another RDF database and SPARQL endpoint.&nbsp;</https:></https:><br /><https: ocumentation="" store.danielknoell.de="" trac="" wiki=""><https: garlik="" github.com="" store=""><br /></https:></https:><br /><h3><https: ocumentation="" store.danielknoell.de="" trac="" wiki=""><https: garlik="" github.com="" store="">Install</https:></https:></h3><https: ocumentation="" store.danielknoell.de="" trac="" wiki=""><https: garlik="" github.com="" store="">My understanding of "easy to install" is "apt-get install" or very close. Virtuoso was the next candidate I found for Debian stretch it ready to install. The installation is smooth but it is necessary to enter a password during installation - write it down, it is required later!&nbsp;</https:></https:><br /><br /><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;"><https: ocumentation="" store.danielknoell.de="" trac="" wiki=""><https: garlik="" github.com="" store="">sudo apt-get install virtuoso-opensource</https:></https:></span><https: ocumentation="" store.danielknoell.de="" trac="" wiki=""><https: garlik="" github.com="" store="">&nbsp;</https:></https:><br /><br /><https: ocumentation="" store.danielknoell.de="" trac="" wiki=""><https: garlik="" github.com="" store="">which gives version 6.1.6 at the time of writing.&nbsp;</https:></https:><br /><https: ocumentation="" store.danielknoell.de="" trac="" wiki=""><https: garlik="" github.com="" store=""></https:></https:><br /><h3><https: ocumentation="" store.danielknoell.de="" trac="" wiki=""><https: garlik="" github.com="" store="">Start</https:></https:></h3><https: ocumentation="" store.danielknoell.de="" trac="" wiki=""><https: garlik="" github.com="" store="">The Virtuoso tutorial <https: ain="" dataspace="" dav="" doc="" tart="" virtuoso.openlinksw.com="" wiki=""> <a href="https://virtuoso.openlinksw.com/dataspace/doc/dav/wiki/Main/VOSStart"> https://virtuoso.openlinksw.com/dataspace/doc/dav/wiki/Main/VOSStart</a> does not start at the beginning and points to various places not connected to my task and sometimes not even working, but you can see in it, that you should point your browser at <http: conductor="" localhost:8890=""><a href="http://localhost:8890/conductor"> http://localhost:8890/conductor</a> (obvious!), where the default user is "dba" but the default password is not what is stated in the tutorial but the password you set during installation. "the rest is self-explanatory" says the "tutorial".</http:></https:></https:></https:><br /><br /><https: ocumentation="" store.danielknoell.de="" trac="" wiki=""><https: garlik="" github.com="" store=""><https: ain="" dataspace="" dav="" doc="" tart="" virtuoso.openlinksw.com="" wiki=""><http: conductor="" localhost:8890="">The initial screen, after login,&nbsp; invites you to 5 major themes (from Business Process Integration to Enterprise Collaboration) none of them relevant for wanting just to load RDF data and execute a query. Bewildering!&nbsp;</http:></https:></https:></https:><br /><br /><https: ocumentation="" store.danielknoell.de="" trac="" wiki=""><https: garlik="" github.com="" store=""><https: ain="" dataspace="" dav="" doc="" tart="" virtuoso.openlinksw.com="" wiki=""><http: conductor="" localhost:8890="">On top of the screen a list of 9 tabs includes "LinkedData", which opens a second list of tabs and a screen for "SPARQL Execution" - closer. But how to load data?&nbsp;</http:></https:></https:></https:><br /><https: ocumentation="" store.danielknoell.de="" trac="" wiki=""><https: garlik="" github.com="" store=""><https: ain="" dataspace="" dav="" doc="" tart="" virtuoso.openlinksw.com="" wiki=""><http: conductor="" localhost:8890=""><br /></http:></https:></https:></https:><br /><h3><https: ocumentation="" store.danielknoell.de="" trac="" wiki=""><https: garlik="" github.com="" store=""><https: ain="" dataspace="" dav="" doc="" tart="" virtuoso.openlinksw.com="" wiki=""><http: conductor="" localhost:8890="">Load data </http:></https:></https:></https:></h3><https: ocumentation="" store.danielknoell.de="" trac="" wiki=""><https: garlik="" github.com="" store=""><https: ain="" dataspace="" dav="" doc="" tart="" virtuoso.openlinksw.com="" wiki=""><http: conductor="" localhost:8890="">Check the other 8 tabs...  perhaps: "QuadStore Upload"? Correct: with the browse tab find the file (in my case Ntriples with .nt extension) and extend the proposed "Named Graph IRI" to with some name (e.g. xx) to "http://localhost:8890/DAVxx". The value will be required for the query. Click on upload. The filename will disappear and in the upper right you can read - if you look there - "upload finished". Done.&nbsp;</http:></https:></https:></https:><br /><br /><h3><https: ocumentation="" store.danielknoell.de="" trac="" wiki=""><https: garlik="" github.com="" store=""><https: ain="" dataspace="" dav="" doc="" tart="" virtuoso.openlinksw.com="" wiki=""><http: conductor="" localhost:8890="">Query </http:></https:></https:></https:></h3><https: ocumentation="" store.danielknoell.de="" trac="" wiki=""><https: garlik="" github.com="" store=""><https: ain="" dataspace="" dav="" doc="" tart="" virtuoso.openlinksw.com="" wiki=""><http: conductor="" localhost:8890="">Now click on the SPARQL tab again, paste the "Named Graph IRI" value into the "Default Graph IRI" field and the query into the query field. Test with&nbsp;</http:></https:></https:></https:><br /><br /><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;"><https: ocumentation="" store.danielknoell.de="" trac="" wiki=""><https: garlik="" github.com="" store=""><https: ain="" dataspace="" dav="" doc="" tart="" virtuoso.openlinksw.com="" wiki=""><http: conductor="" localhost:8890="">SELECT * WHERE { ?s ?p ?o } LIMIT 10</http:></https:></https:></https:></span><br /><br /><https: ocumentation="" store.danielknoell.de="" trac="" wiki=""><https: garlik="" github.com="" store=""><https: ain="" dataspace="" dav="" doc="" tart="" virtuoso.openlinksw.com="" wiki=""><http: conductor="" localhost:8890="">and you should see underneath the list of s, p and o value. Neat.&nbsp;</http:></https:></https:></https:><br /><br /><https: ocumentation="" store.danielknoell.de="" trac="" wiki=""><https: garlik="" github.com="" store=""><https: ain="" dataspace="" dav="" doc="" tart="" virtuoso.openlinksw.com="" wiki=""><http: conductor="" localhost:8890="">A more complex query can be pasted in, e.g.&nbsp;</http:></https:></https:></https:><br /><br /><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;"><https: ocumentation="" store.danielknoell.de="" trac="" wiki=""><https: garlik="" github.com="" store=""><https: ain="" dataspace="" dav="" doc="" tart="" virtuoso.openlinksw.com="" wiki=""><http: conductor="" localhost:8890="">SELECT   ?filename ?fpath ?count ?md5group&nbsp;</http:></https:></https:></https:></span><br /><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;"><https: ocumentation="" store.danielknoell.de="" trac="" wiki=""><https: garlik="" github.com="" store=""><https: ain="" dataspace="" dav="" doc="" tart="" virtuoso.openlinksw.com="" wiki=""><http: conductor="" localhost:8890="">WHERE {&nbsp;</http:></https:></https:></https:></span><br /><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;"><https: ocumentation="" store.danielknoell.de="" trac="" wiki=""><https: garlik="" github.com="" store=""><https: ain="" dataspace="" dav="" doc="" tart="" virtuoso.openlinksw.com="" wiki=""><http: conductor="" localhost:8890="">&nbsp;&nbsp;&nbsp; ?unit dove:md5 ?md5group .&nbsp;</http:></https:></https:></https:></span><br /><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;"><https: ocumentation="" store.danielknoell.de="" trac="" wiki=""><https: garlik="" github.com="" store=""><https: ain="" dataspace="" dav="" doc="" tart="" virtuoso.openlinksw.com="" wiki=""><http: conductor="" localhost:8890="">&nbsp;&nbsp;&nbsp; ?unit dove:filename ?filename .&nbsp;</http:></https:></https:></https:></span><br /><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;"><https: ocumentation="" store.danielknoell.de="" trac="" wiki=""><https: garlik="" github.com="" store=""><https: ain="" dataspace="" dav="" doc="" tart="" virtuoso.openlinksw.com="" wiki=""><http: conductor="" localhost:8890="">&nbsp;&nbsp;&nbsp; ?unit dove:filepath ?fpath  .&nbsp;</http:></https:></https:></https:></span><br /><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;"><https: ocumentation="" store.danielknoell.de="" trac="" wiki=""><https: garlik="" github.com="" store=""><https: ain="" dataspace="" dav="" doc="" tart="" virtuoso.openlinksw.com="" wiki=""><http: conductor="" localhost:8890="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; { SELECT&nbsp; ?md5group (Count(?unitgroup) as ?count)&nbsp;</http:></https:></https:></https:></span><br /><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;"><https: ocumentation="" store.danielknoell.de="" trac="" wiki=""><https: garlik="" github.com="" store=""><https: ain="" dataspace="" dav="" doc="" tart="" virtuoso.openlinksw.com="" wiki=""><http: conductor="" localhost:8890="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; WHERE  {&nbsp;</http:></https:></https:></https:></span><br /><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;"><https: ocumentation="" store.danielknoell.de="" trac="" wiki=""><https: garlik="" github.com="" store=""><https: ain="" dataspace="" dav="" doc="" tart="" virtuoso.openlinksw.com="" wiki=""><http: conductor="" localhost:8890="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ?unitgroup  dove:md5  ?md5group .&nbsp;</http:></https:></https:></https:></span><br /><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;"><https: ocumentation="" store.danielknoell.de="" trac="" wiki=""><https: garlik="" github.com="" store=""><https: ain="" dataspace="" dav="" doc="" tart="" virtuoso.openlinksw.com="" wiki=""><http: conductor="" localhost:8890="">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }           GROUP BY ?md5group Having (count(?unitgroup) &gt; 1)&nbsp;</http:></https:></https:></https:></span><br /><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;"><https: ocumentation="" store.danielknoell.de="" trac="" wiki=""><https: garlik="" github.com="" store=""><https: ain="" dataspace="" dav="" doc="" tart="" virtuoso.openlinksw.com="" wiki=""><http: conductor="" localhost:8890="">&nbsp; &nbsp; &nbsp; &nbsp; }&nbsp;</http:></https:></https:></https:></span><br /><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;"><https: ocumentation="" store.danielknoell.de="" trac="" wiki=""><https: garlik="" github.com="" store=""><https: ain="" dataspace="" dav="" doc="" tart="" virtuoso.openlinksw.com="" wiki=""><http: conductor="" localhost:8890="">&nbsp;&nbsp; } order by ?md5group ?fpath&nbsp;</http:></https:></https:></https:></span><br /><br /><https: ocumentation="" store.danielknoell.de="" trac="" wiki=""><https: garlik="" github.com="" store=""><https: ain="" dataspace="" dav="" doc="" tart="" virtuoso.openlinksw.com="" wiki=""><http: conductor="" localhost:8890="">&nbsp;and produces the expected results.&nbsp;</http:></https:></https:></https:><br /><br /><https: ocumentation="" store.danielknoell.de="" trac="" wiki=""><https: garlik="" github.com="" store=""><https: ain="" dataspace="" dav="" doc="" tart="" virtuoso.openlinksw.com="" wiki=""><http: conductor="" localhost:8890="">The above complex query relies on the extension of the "Namespace" in its tab with the prefix value for "dove" with "http://gerastree.at/dove_2017#".&nbsp;</http:></https:></https:></https:><br /><br /><https: ocumentation="" store.danielknoell.de="" trac="" wiki=""><https: garlik="" github.com="" store=""><https: ain="" dataspace="" dav="" doc="" tart="" virtuoso.openlinksw.com="" wiki=""><http: conductor="" localhost:8890="">Queries can be saved (clicking on "Save") by giving a "File of XML template value" starting with "/DAV/", e.g. "/DAV/groupsWC" and a description text. In the SPARQL Execution tab, selecting saved queries shows a list of the stored ones and one can click "Edit" to get them back into the query window and execute them as above or click the query name, which executes them and opens the XML file in the browser (the URL, in my case <http: groupswc="" localhost:8890=""><a href="http://localhost:8890/DAV/groupsWC">http://localhost:8890/DAV/groupsWC </a>can be opened in any browser and produces the XML doc - could be useful).&nbsp;</http:></http:></https:></https:></https:><br /><br /><h3>Conclusion </h3><https: ocumentation="" store.danielknoell.de="" trac="" wiki=""><https: garlik="" github.com="" store=""><https: ain="" dataspace="" dav="" doc="" tart="" virtuoso.openlinksw.com="" wiki=""><http: conductor="" localhost:8890=""><http: groupswc="" localhost:8890="">My purpose, loading data and executing a SPARQL query was satisfied and I did, for now, not venture deeper into Virtuoso and conductor. I hope this short tutorial helps to get started quickly and easily with Virtuoso and it shows, implicitly,&nbsp; what is wrong with (a) tutorials which do not start at the beginning, (b) inconsistent terminology and (c) software which is not modular but includes "all but the kitchen sink".&nbsp;</http:></http:></https:></https:></https:><br /><br /><h3><https: ocumentation="" store.danielknoell.de="" trac="" wiki=""><https: garlik="" github.com="" store=""><https: ain="" dataspace="" dav="" doc="" tart="" virtuoso.openlinksw.com="" wiki=""><http: conductor="" localhost:8890=""><http: groupswc="" localhost:8890="">Update</http:></http:></https:></https:></https:></h3><https: ocumentation="" store.danielknoell.de="" trac="" wiki=""><https: garlik="" github.com="" store=""><https: ain="" dataspace="" dav="" doc="" tart="" virtuoso.openlinksw.com="" wiki=""><http: conductor="" localhost:8890=""><http: groupswc="" localhost:8890="">I had some trouble with loading RDF and found:</http:></http:></https:></https:></https:><br /><ol><li><https: ocumentation="" store.danielknoell.de="" trac="" wiki=""><https: garlik="" github.com="" store=""><https: ain="" dataspace="" dav="" doc="" tart="" virtuoso.openlinksw.com="" wiki=""><http: conductor="" localhost:8890=""><http: groupswc="" localhost:8890="">The RDF triples can be provided as gziped file (no other compression method is currently supported) - this saves a lot of disk space!</http:></http:></https:></https:></https:></li><li><https: ocumentation="" store.danielknoell.de="" trac="" wiki=""><https: garlik="" github.com="" store=""><https: ain="" dataspace="" dav="" doc="" tart="" virtuoso.openlinksw.com="" wiki=""><http: conductor="" localhost:8890=""><http: groupswc="" localhost:8890="">There is a <a href="https://virtuoso.openlinksw.com/dataspace/doc/dav/wiki/Main/VirtBulkRDFLoader">bulk loader process </a>which can be used; it took me a while to understand that the directory from which the file is loaded must be included in the /etc/virtuoso/virtuoso.ini file:&nbsp; </http:></http:></https:></https:></https:><https: ocumentation="" store.danielknoell.de="" trac="" wiki=""><https: garlik="" github.com="" store=""><https: ain="" dataspace="" dav="" doc="" tart="" virtuoso.openlinksw.com="" wiki=""><http: conductor="" localhost:8890=""><http: groupswc="" localhost:8890=""><pre><code>DirsAllowed              = ., /usr/share/virtuoso-opensource-6.1/vad, /home/frank/virtuosoData, /home/frank/.Dove</code></pre>&nbsp; &nbsp;&nbsp; </http:></http:></https:></https:><https: garlik="" github.com="" store=""><https: ain="" dataspace="" dav="" doc="" tart="" virtuoso.openlinksw.com="" wiki=""><http: conductor="" localhost:8890=""><http: groupswc="" localhost:8890="">You can then use the isql-vt console (in debian, may have a diffferent name in other distributions) as&nbsp;</http:></http:></https:></https:><https: garlik="" github.com="" store=""><https: ain="" dataspace="" dav="" doc="" tart="" virtuoso.openlinksw.com="" wiki=""><http: conductor="" localhost:8890=""><http: groupswc="" localhost:8890=""></http:></http:></https:></https:></https:><https: ocumentation="" store.danielknoell.de="" trac="" wiki=""><https: garlik="" github.com="" store=""><https: ain="" dataspace="" dav="" doc="" tart="" virtuoso.openlinksw.com="" wiki=""><http: conductor="" localhost:8890=""><http: groupswc="" localhost:8890=""><pre><code>sudo isql-vt localhost usernaem password <br />ld_dir('/home/frank/virtuosoData/', '*.*', 'http://graphname');<br />rdf_loader_run(<span style="font-family: Georgia, &quot;Times New Roman&quot;, serif;">)</span></code><br /><https: ocumentation="" store.danielknoell.de="" trac="" wiki=""><https: garlik="" github.com="" store=""><https: ain="" dataspace="" dav="" doc="" tart="" virtuoso.openlinksw.com="" wiki=""><http: conductor="" localhost:8890=""><http: groupswc="" localhost:8890=""><pre><code></code></pre></http:></http:></https:></https:></https:><https: ocumentation="" store.danielknoell.de="" trac="" wiki=""><https: garlik="" github.com="" store=""><https: ain="" dataspace="" dav="" doc="" tart="" virtuoso.openlinksw.com="" wiki=""><http: conductor="" localhost:8890=""><http: groupswc="" localhost:8890=""> </http:></http:></https:></https:></https:></pre></http:></http:></https:></https:></https:></li></ol>