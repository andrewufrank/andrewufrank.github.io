---
id: 148
title: Synchronizing multiple computers
date: 2009-05-08T17:03:00+00:00
author: Andrew Frank
layout: post
guid: https://test.gerastree.at/2009/05/08/synchronizing-multiple-computers/
permalink: /synchronizing-multiple-computers/
blogger_blog:
  - andrewufrank.blogspot.com
blogger_author:
  - andrew
blogger_permalink:
  - /2009/05/synchronizing-multiple-computers.html
blogger_internal:
  - /feeds/3533242289707427914/posts/default/2715186456018330967
categories:
  - rdiff-backup
  - sync
  - ubuntu
  - unison
---
<a href="http://4.bp.blogspot.com/_Z6mNar6sZs4/SgRqeMoxFYI/AAAAAAAAABU/wO_uMJhyCm0/s1600-h/geese.JPG"><img style="margin: 0pt 10px 10px 0pt; float: left; cursor: pointer; width: 314px; height: 320px;" src="http://4.bp.blogspot.com/_Z6mNar6sZs4/SgRqeMoxFYI/AAAAAAAAABU/wO_uMJhyCm0/s320/geese.JPG" alt="" id="BLOGGER_PHOTO_ID_5333504925734344066" border="0" /></a>For 20 year I had only one computer, a laptop and later a tablet. I like the slate tablet from Fujitsu Siemens, because it lets me arrange screen and keyboard as I like it. Unfortunately, it is heavy and the batteries run out quickly, thus I have added a Asus eeePC 901 “for the road” - ending up with three machines: a tablet at home, a table at work and the eeePC anywhere else.<br /><br />Synchronizing the three computers became crucial. I regularly missed a file needed, because it was stored on another machine, and I had to repeat any change to the interface I made.<br /><br />Synchronizing the files I work on was easy: Unison does it. I set up a directory on a machine on the web (computer number 4!) and I sync each of the three machines I work on against the fourth one. Unison works reliably and points out files which have a conflict and need manual (human intelligence) resolution. But still, every change to a setup in an application had to be redone on the other machine... maddening!<br /><br />When I upgraded all three computers to Ubuntu 9.04 Jaunty I set them up with exactly the same software and then decided to synchronizing all my files – including the hidden files describing my configuration and user preference using Unison. The unix-style operating system separates the setup of the computer (which is evidently different for each hardware) from all user specific aspects, which are stored under /home/user_name. This works!<br /><br />As an added benefit, the files I have on computer number 4 are automatically backed up every night (with rdiff-backup, keeping  all old copies). This is sufficient for  retrieving previous copies of files; a backup of the installation is not needed, because it is faster to re-install all, which takes less than 2 hours, including installing additional software and the one or two edits necessary.<br /><br />To reduce traffic on the web, I excluded all “cache” type files and try to find the files which are specific and must remain different on the three machines. The file with the list of path and filenames to ignore when synchronizing is included  here at the end with the hope that I may get some hints what I should add or rather what I must synchronizing to avoid disasters.<br /><br />I guess others may have similar needs - having all your files and setup all the time available is what Google and Microsoft try to sell. To make it a reality under my full control, the software designers should think of<br />1. all cached data in files or directories called 'cache' and not rely blindly on the reliability,<br />2. configuration in small files, easily shared,<br />3. allow local configurations (and other data needed per machine) in files or directories called 'local' (or with names including the hostname).<br />It should be possible to have a live system on a stick, which you can plug into any reasonable computer, start up, sync and have most of your files locally to work with.<br /><br />For things which  must be different on different machines, I use scripts I with a case statement as shown here:<br /><br /><blockquote>#!/bin/sh<br /># to execute depending on the host<br /><br />p904Atlanta () {<br />                  unison -sshargs "-o ProtocolKeepAlives=30" gi41_mergeAtlantaBern<br />                  exit 0<br />                          }<br /><br />p904Bern () {<br />                  unison -sshargs "-o ProtocolKeepAlives=30" gi41_mergeAtlantaBern<br />                  exit 0<br />                      }<br /><br />p904Hamburg () {<br />unison -sshargs "-o ProtocolKeepAlives=30" gi41_mergeHamburg<br />exit 0<br />}<br /><br />THISHOST=$(hostname)<br /><br />case $THISHOST in<br />bernJ) p904Atlanta;;<br />atlantaJ) p904Bern;;<br />hamburgI) p904Hamburg;;<br />*) echo unknown host $THISHOST;;<br />esac<br /></blockquote><br />The list of files excluded for Unison:<br /><blockquote>ignore = Path .unison/*<br />ignorenot = Path .unison/*.prf<br />ignorenot = Path .unison/*.common<br /><br />ignorenot = Path .nx<br />ignore = Path .nx/*<br />ignorenot = Path .nx/config<br /><br />ignorenot = Path .svngzPrefs.txt<br /><br />ignore = Path .beagle<br />ignore = Path .cache<br />ignore = Path .cabal     <br />ignore = Path .eclipse<br />ignore = Path .evolution<br />ignore = Path .mozilla-thunderbird<br />ignore = Path .popcache<br />ignore = Path .wine<br />ignore = Path .nautilus<br />ignore = Path .thumbnails<br /><br />ignore = Path .xsession-errors<br />ignore = Path .pulse<br />ignore = Path .ICEauthority<br />ignore = Path .Xauthority<br /><br />ignore = Path .dbus<br />ignore = Path .config/transmission<br />ignore = Path .opensync*<br />ignore = Path .ssh/ida_rsa<br />ignore = Path .gnome2/gnome-power-manager/profile*<br />ignore = Path .gconfd/saved*<br />ignore = Path .recently-used.xbel<br /><br />ignore = Path {unison.log}<br />ignore = Path {local_*}<br />ignore = Path Photos<br />ignore = Path {workspace}<br />ignore = Path {experiments}<br /><br />#avoid temp files<br />ignore = Name temp.*<br />ignore = Name .*~<br />ignore = Name {*.tmp}<br />ignore = Name theResult<br />ignore = Name *cache*<br />ignore = Name *Cache*<br />ignore = Name cache*<br />ignore = Name insertedRepo_*<br /><br />ignore = Name trash<br />ignore = Name .trash*<br />ignore = Name Trash<br />ignore = Name *Trash*<br />ignore = Name *trash*<br /><br />ignore = Name urlclassifier*<br /><br />perms=0o1777</blockquote><br /><blockquote></blockquote>